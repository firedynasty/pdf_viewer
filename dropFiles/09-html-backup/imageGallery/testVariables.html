<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipboard Content Manager</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #007acc, #005a99);
            color: white;
            border-radius: 10px;
        }
        .search-container {
            margin-bottom: 20px;
            text-align: center;
        }
        .search-box {
            width: 300px;
            padding: 10px;
            font-size: 16px;
            border: 2px solid #007acc;
            border-radius: 5px;
            outline: none;
        }
        .search-box:focus {
            border-color: #005a99;
            box-shadow: 0 0 10px rgba(0, 122, 204, 0.3);
        }
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .content-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid #007acc;
        }
        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
            border-left-color: #00cc66;
        }
        .content-card.selected {
            border: 3px solid #ff6b6b !important;
            transform: scale(1.02) !important;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3) !important;
            background-color: #ffe6e6 !important;
        }
        .content-card.copied {
            border-left-color: #00cc66;
            background-color: #e8f5e9;
        }
        .card-title {
            font-size: 18px;
            font-weight: bold;
            color: #007acc;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card-key {
            font-size: 12px;
            color: #666;
            font-family: monospace;
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
        }
        .card-preview {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            margin-top: 10px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            max-height: 120px;
            overflow: hidden;
            position: relative;
        }
        .card-preview::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: linear-gradient(transparent, #f8f9fa);
        }
        .copy-indicator {
            display: inline-block;
            margin-left: 10px;
            color: #00cc66;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .copy-indicator.show {
            opacity: 1;
        }
        .stats {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .no-results {
            text-align: center;
            color: #666;
            font-style: italic;
            margin-top: 40px;
        }
        .instructions {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .instructions h4 {
            margin: 0 0 10px 0;
            color: #1976d2;
        }
        .instructions code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 3px;
            border: 1px solid #ddd;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ“‹ Clipboard Content Manager</h1>
        <p>Click on any card to copy its content to clipboard</p>
    </div>

    <div class="instructions">
        <h4>Usage:</h4>
        <ul>
            <li>Click any card to copy its full content to your clipboard</li>
            <li>Use the search box to filter items (or press <code>/</code>)</li>
            <li>Navigate with arrow keys and press <code>Enter</code> to copy</li>
            <li>The preview shows the first ~200 characters of the content</li>
        </ul>
    </div>

    <div class="search-container">
        <input type="text" id="searchBox" class="search-box" placeholder="Search content..." onkeyup="filterContent()">
    </div>

    <div class="stats">
        <span id="statsDisplay">Loading content...</span>
    </div>

    <div class="content-grid" id="contentGrid">
        <!-- Content cards will be populated here -->
    </div>

    <div class="no-results" id="noResults" style="display: none;">
        No content found matching your search.
    </div>

    <script>
        // ===== DATA SECTION =====
        // Add your content here as const variables named: test, test2, test3, etc.
        // The first line of each template becomes the title (everything before the first \n)

        const test = `wsj article

SIMI VALLEY, Calif.â€”Penny Lamb and Jeffery Lichtenberg were 1,500 miles from their home in Oklahoma with no money and no prospects when they were kicked out of their drug rehab program.

None of it had gone as expected. Months earlier, Lichtenberg said, a man he knew from a past prison stay had promised to help if they ever wanted to kick their meth habits. The man texted photos of rehabs that looked like Hollywood mansions for movie stars, with swimming pools and hot tubs. They wouldn't have to pay a cent, he said, including for their flight to Californiaâ€”and he would help them sign up for a health insurance policy that would cover the rehab costs.

When they arrived, the facilities looked nothing like the photos, the couple said. They were shuttled between properties where illicit drugs were common and treatment included logging onto crowded video calls.`;

        const test2 = `wsj article 2
Authorities Re-Examine South Carolina Road-Rage Killing Following Public Outcry
State attorney general is appointing a special prosecutor in the shooting of Scott Spivey, previously ruled self-defense under stand-your-ground law`;


const test3 = `role play chinese

Li Xiaopeng: Hello! My last name is Li. May I ask your last name?
Wang Gui: Hello! My last name is Wang.
Li Xiaopeng: Mr. Wang, what is your name?
Wang Gui: My name is Wang Gui. Miss Li, how about you?
Li Xiaopeng: My name is Li Xiaopeng. Nice to meet you!
Wang Gui: Nice to meet you, too!
`



const test4 = `KUA worship
https://www.youtube.com/watch?v=8wHi8WgAQfQ



`



const test5 = `ChatGPT Retailers Nervous
https://www.wsj.com/business/retail/chatgpt-should-make-retailers-nervous-bad4102a?mod=finance_feat1_hots_pos2
`

const test6 = `testing chess, punishing_a_pin
https://www.youtube.com/watch?v=B1twYwjnCCw,5:58,6:41,9:06,10:04
`

const test7= `Jared
https://www.youtube.com/watch?v=CUSEGK--r4A&t=440s;0:00 What Trump and Jared Kushner just did is 0:03 in the Bible. You will be shocked when 0:05 you find seven discoveries about what 0:08 Trump and Jared Kushner just did. And 0:10 there's one detail about Kushner's role 0:13 that nobody's connecting to scripture. A 0:16 detail that when you see it is going to 0:19 make you question whether we're watching 0:21 the setup for the greatest peace in 0:23 human history or the greatest deception. 0:26 But before I show you that detail, you 0:29 need`


        // ===== END DATA SECTION =====

        // Auto-build clipboardData from const variables
        function buildClipboardDataFromConstants() {
            const data = {};
            const scriptText = document.currentScript.textContent;

            // Find all const declarations matching pattern: const test[number]? = `...`
            const constRegex = /const\s+(test\d*)\s*=\s*`([^`]*)`/gs;
            let match;

            while ((match = constRegex.exec(scriptText)) !== null) {
                const varName = match[1];  // e.g., "test" or "test2"
                const content = match[2];   // The template string content

                // Extract title from first line
                const firstNewline = content.indexOf('\n');
                const title = firstNewline !== -1
                    ? content.substring(0, firstNewline).trim()
                    : content.trim();

                data[varName] = {
                    title: title || varName,  // Fallback to variable name if no title
                    content: content
                };
            }

            return data;
        }

        const clipboardData = buildClipboardDataFromConstants();

        let allContent = [];
        let currentContent = [];
        let selectedIndex = 0;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadContent();
        });

        function loadContent() {
            try {
                allContent = getAllContent();
                displayContent(allContent);
                updateStats(allContent.length);
            } catch (error) {
                console.error('Error loading content:', error);
                document.getElementById('statsDisplay').textContent = 'Error loading content data';
            }
        }

        function getAllContent() {
            return Object.keys(clipboardData).map(key => ({
                key: key,
                title: clipboardData[key].title,
                content: clipboardData[key].content,
                preview: generatePreview(clipboardData[key].content)
            }));
        }

        function generatePreview(content) {
            // Remove the title line if it's at the start
            let previewText = content.trim();
            const lines = previewText.split('\n');

            // Skip the first line if it looks like a title (short and followed by blank line)
            if (lines.length > 2 && lines[0].length < 50 && lines[1].trim() === '') {
                previewText = lines.slice(2).join(' ');
            } else {
                previewText = lines.join(' ');
            }

            // Clean up whitespace
            previewText = previewText.replace(/\s+/g, ' ').trim();

            // Truncate to ~200 characters, trying to break at sentence end
            if (previewText.length > 200) {
                const truncated = previewText.substring(0, 200);
                const lastPeriod = truncated.lastIndexOf('.');
                const lastSpace = truncated.lastIndexOf(' ');

                if (lastPeriod > 150) {
                    return truncated.substring(0, lastPeriod + 1);
                } else if (lastSpace > 150) {
                    return truncated.substring(0, lastSpace) + '...';
                }
                return truncated + '...';
            }

            return previewText;
        }

        function displayContent(contentItems) {
            const grid = document.getElementById('contentGrid');
            const noResults = document.getElementById('noResults');

            if (contentItems.length === 0) {
                grid.innerHTML = '';
                noResults.style.display = 'block';
                currentContent = [];
                selectedIndex = 0;
                return;
            }

            noResults.style.display = 'none';

            // Sort content alphabetically by title
            contentItems.sort((a, b) => a.title.localeCompare(b.title));

            // Update current content for navigation
            currentContent = contentItems;
            selectedIndex = 0;

            grid.innerHTML = contentItems.map((item, index) => `
                <div class="content-card" data-index="${index}" onclick="copyToClipboard(${index})">
                    <div class="card-title">
                        ${item.title}
                        <span class="card-key">${item.key}</span>
                    </div>
                    <div class="card-preview">${item.preview}</div>
                    <span class="copy-indicator" id="indicator-${index}">âœ“ Copied!</span>
                </div>
            `).join('');

            // Set initial selection if we have results
            if (contentItems.length > 0) {
                setTimeout(() => {
                    restoreSelection();
                }, 100);
            }
        }

        function copyToClipboard(index) {
            selectedIndex = index;
            const item = currentContent[index];

            // Remove the first line (title) from content before copying
            const lines = item.content.split('\n');
            const contentWithoutTitle = lines.slice(1).join('\n');

            // Copy to clipboard (without the title line)
            navigator.clipboard.writeText(contentWithoutTitle).then(() => {
                // Show visual feedback
                const card = document.querySelectorAll('.content-card')[index];
                const indicator = document.getElementById(`indicator-${index}`);

                card.classList.add('copied');
                indicator.classList.add('show');

                // Remove feedback after 2 seconds
                setTimeout(() => {
                    card.classList.remove('copied');
                    indicator.classList.remove('show');
                }, 2000);

                console.log('Copied to clipboard:', item.title);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy to clipboard. Please try again.');
            });

            updateSelection();
            saveSelection();
        }

        function filterContent() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();

            if (searchTerm === '') {
                displayContent(allContent);
                updateStats(allContent.length);
                return;
            }

            const filteredContent = allContent.filter(item =>
                item.title.toLowerCase().includes(searchTerm) ||
                item.content.toLowerCase().includes(searchTerm) ||
                item.key.toLowerCase().includes(searchTerm)
            );

            displayContent(filteredContent);
            updateStats(filteredContent.length, allContent.length);
        }

        function updateStats(currentCount, totalCount = null) {
            const statsDisplay = document.getElementById('statsDisplay');
            if (totalCount !== null) {
                statsDisplay.textContent = `Showing ${currentCount} of ${totalCount} items`;
            } else {
                statsDisplay.textContent = `${currentCount} items available`;
            }
        }

        function saveSelection() {
            if (currentContent.length > 0 && selectedIndex >= 0 && selectedIndex < currentContent.length) {
                const selectedKey = currentContent[selectedIndex].key;
                localStorage.setItem('selectedContentKey', selectedKey);
            }
        }

        function restoreSelection() {
            const savedKey = localStorage.getItem('selectedContentKey');
            if (savedKey && currentContent.length > 0) {
                const savedIndex = currentContent.findIndex(item => item.key === savedKey);
                if (savedIndex !== -1) {
                    selectedIndex = savedIndex;
                }
            }
            updateSelection();
        }

        function updateSelection() {
            // Remove previous selection
            document.querySelectorAll('.content-card.selected').forEach(card => {
                card.classList.remove('selected');
            });

            // Add selection to current card
            if (currentContent.length > 0) {
                const cards = document.querySelectorAll('.content-card');
                if (cards[selectedIndex]) {
                    cards[selectedIndex].classList.add('selected');
                    cards[selectedIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }

        // Add keyboard navigation
        document.addEventListener('keydown', function(event) {
            switch(event.key) {
                case '/':
                    if (event.target.tagName !== 'INPUT') {
                        event.preventDefault();
                        document.getElementById('searchBox').focus();
                    }
                    break;

                case 'ArrowLeft':
                case 'ArrowUp':
                    event.preventDefault();
                    event.stopPropagation();
                    if (currentContent.length > 0) {
                        selectedIndex = selectedIndex > 0 ? selectedIndex - 1 : currentContent.length - 1;
                        updateSelection();
                        saveSelection();
                    }
                    break;

                case 'ArrowRight':
                case 'ArrowDown':
                    event.preventDefault();
                    event.stopPropagation();
                    if (currentContent.length > 0) {
                        selectedIndex = selectedIndex < currentContent.length - 1 ? selectedIndex + 1 : 0;
                        updateSelection();
                        saveSelection();
                    }
                    break;

                case 'Enter':
                    event.preventDefault();
                    if (event.target.tagName === 'INPUT') {
                        // If in search box, focus first result
                        event.target.blur();
                        if (currentContent.length > 0) {
                            updateSelection();
                        }
                    } else if (currentContent.length > 0) {
                        // Copy selected content
                        copyToClipboard(selectedIndex);
                    }
                    break;

                case 'Escape':
                    event.preventDefault();
                    if (event.target.tagName === 'INPUT') {
                        // Clear search and show all content
                        event.target.value = '';
                        event.target.blur();
                        filterContent();
                    } else {
                        // Focus on search box
                        document.getElementById('searchBox').focus();
                    }
                    break;
            }
        });
    </script>
</body>
</html>
